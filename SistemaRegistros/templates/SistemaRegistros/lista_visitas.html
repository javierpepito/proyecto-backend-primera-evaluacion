{% extends 'SistemaRegistros/base.html' %}
{% load filtros %}

{% block title %}
    Lista de Visitantes
{% endblock %}

{% block content %}
    <section class="seccion-bienvenida">
        <div class="contenedor-imagen m-4">
            <img src="../../../staticfiles/SistemaRegistros/images/microprocesador.jpg" alt="Imagen de procesador">

        </div>
        <div class="contenedor-texto  d-flex flex-column justify-content-center align-items-center text-center">
            <h2>Bienvenido///// al Administrador de Visitas de PepitoTeach</h2>
            <p>Esta es una plataforma para la gestion de todas las visitas que se hagan a la empresa, especificamente para llevar 
                registro de las visitas diarias. Nuestra empresa PepitoTech se encarga de crear diversos componentes del mundo de las 
                computadoras, por esto mismo recibimos bastantes visitas de distintos inversores, y esta platoforma nos permite: 
                registrar nuevas visitas, editar las visitas ya existentes, eliminar visitas y por ultimo verlas junto con sus detalles.</p>
        </div>
    </section>

    <section class="seccion-listado">
        <div class="p-4">
            <h2 class="mb-4">
                Listado de visitas de hoy {{ fecha_actual }}
                <span><i class="bi bi-person-fill"></i></span>
            </h2>
            <div class="contenedor-tabla table-responsive">
                <table class="table table-hover">
                    <thead class="table-warning">
                        <tr>
                            <th scope="col">RUT</th>
                            <th scope="col">Nombre</th>
                            <th scope="col">Motivo de la visita</th>
                            <th scope="col">Fecha de la visita</th>
                            <th scope="col">Hora de entrada</th>
                            <th scope="col">Hora de salida</th>
                            <th scope="col">Acciones</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for visita in visitas %}
                            <tr>
                                <td>{{ visita.rut|formatear_rut }}</td>
                                <td>{{ visita.nombre }}</td>
                                <td>{{ visita.motivo_visita }}</td>
                                <td>{{ visita.fecha_visita }}</td>
                                <td>{{ visita.hora_entrada }}</td>
                                <td>{{ visita.hora_salida }}</td>
                                <td>
                                    <a href="{% url 'editar_visita' visita.id %}" class="btn btn-info"><i class="bi bi-pencil-square"></i>Editar</a>
                                    <a href="{% url 'eliminar_visita' visita.id %}" class="btn btn-danger"><i class="bi bi-trash"></i>Eliminar</a>
                                </td> 
                            </tr>
                        {% empty %}
                            <tr>
                                <td colspan="7" class="text-center">No hay visitas registradas para hoy.</td>
                            </tr>
                        {% endfor %} 
                    </tbody>
                </table>
            </div>
        </div>
    </section>
{% endblock %}